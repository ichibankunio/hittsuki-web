<!DOCTYPE html>
<script src="wasm_exec.js"></script>
<script>
// Polyfill
if (!WebAssembly.instantiateStreaming) {
    WebAssembly.instantiateStreaming = async (resp, importObject) => {
        const source = await (await resp).arrayBuffer();
        return await WebAssembly.instantiate(source, importObject);
    };
}

const go = new Go();
WebAssembly.instantiateStreaming(fetch("ebiten.wasm"), go.importObject).then(result => {
    go.run(result.instance);
});
</script>
<!-- <body>
    <input id="input" type="file">
</body> -->

<script>
    function saveImage(bytes) {
        console.log("js was called")
        // console.log(bytes)

        // Uint8ArrayをBlobオブジェクトに変換
        var blob = new Blob([receivedData], { type: 'image/png' }); // typeを適切な画像形式に合わせて設定

        // BlobオブジェクトをURLに変換
        var imageUrl = URL.createObjectURL(blob);

        // 画像要素を作成して表示
        var imgElement = document.createElement('img');
        imgElement.src = imageUrl;
        document.body.appendChild(imgElement);
    }
</script>